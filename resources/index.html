
    <!doctype html>
    <html>
    <head>
        <meta charset="UTF-8">
        <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
        <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.0.7/aframe/build/aframe-ar.js"></script>
        <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-detector.js"></script>
        <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-handler.js"></script>
        <style>
            #overlay1 {
                position: fixed;
                bottom: 10px;
                left: 10px;
                background-color: rgba(255, 255, 255, 0.8);
                padding: 10px;
                border-radius: 5px;
                font-size: 16pt;
            }
            #overlay2 {
                position: fixed;
                top: 10px;
                right: 10px;
                background-color: rgba(255, 255, 200, 0.8);
                padding: 10px;
                border-radius: 5px;
                font-size: 16pt;
                color: blue;
            }
    
        </style>
    </head>
    
    <body style="margin: 0; overflow: hidden;">
        <a-scene
            vr-mode-ui="enabled: false;"
            loading-screen="enabled: false;"
            renderer="logarithmicDepthBuffer: true;"
            arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
            id="scene"
            embedded
            gesture-detector
        >
    
            <!-- assets ST -->
            <a-assets>
    
                <a-asset-item
                    id="asset1"
                    src="assets/asset1.glb"
                ></a-asset-item>
        
                <a-asset-item
                    id="asset2"
                    src="assets/asset2.glb"
                ></a-asset-item>
        
                <a-asset-item
                    id="asset3"
                    src="assets/asset3.glb"
                ></a-asset-item>
        
                <a-asset-item
                    id="asset4"
                    src="assets/asset4.glb"
                ></a-asset-item>
        
                <a-asset-item
                    id="asset5"
                    src="assets/asset5.glb"
                ></a-asset-item>
        
                <a-asset-item
                    id="asset6"
                    src="assets/asset6.glb"
                ></a-asset-item>
        
                <a-asset-item
                    id="asset7"
                    src="assets/asset7.glb"
                ></a-asset-item>
        
                <a-asset-item
                    id="asset8"
                    src="assets/asset8.glb"
                ></a-asset-item>
        
                <a-asset-item
                    id="asset9"
                    src="assets/asset9.glb"
                ></a-asset-item>
        
                <a-asset-item
                    id="asseta"
                    src="assets/asseta.glb"
                ></a-asset-item>
        
                <a-asset-item
                    id="assetb"
                    src="assets/assetb.glb"
                ></a-asset-item>
        
                <a-asset-item
                    id="assetc"
                    src="assets/assetc.glb"
                ></a-asset-item>
        
                <a-asset-item
                    id="assetd"
                    src="assets/assetd.glb"
                ></a-asset-item>
        
            </a-assets>
            <!-- assets ED -->
    
            <!-- asset1 ST -->
            <a-marker
                id="id-asset1"
                type="pattern"
                preset="custom"
                url="assets/asset1.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
            >
                <a-entity
                    id="id-asset1-1"
                    scale="4.0 4.0 4.0"
                    position="0 0 0"
                    rotation="0 0 0"
                    animation-mixer="loop: repeat"
                    gltf-model="#asset1"
                    class="clickable"
                    gesture-handler
                >
                </a-entity>
            </a-marker>
            <!-- asset1 ED -->
        
            <!-- asset2 ST -->
            <a-marker
                id="id-asset2"
                type="pattern"
                preset="custom"
                url="assets/asset2.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
            >
                <a-entity
                    id="id-asset2-1"
                    scale="4.0 4.0 4.0"
                    position="0 0 0"
                    rotation="0 0 0"
                    animation-mixer="loop: repeat"
                    gltf-model="#asset2"
                    class="clickable"
                    gesture-handler
                >
                </a-entity>
            </a-marker>
            <!-- asset2 ED -->
        
            <!-- asset3 ST -->
            <a-marker
                id="id-asset3"
                type="pattern"
                preset="custom"
                url="assets/asset3.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
            >
                <a-entity
                    id="id-asset3-1"
                    scale="4.0 4.0 4.0"
                    position="0 0 0"
                    rotation="0 0 0"
                    animation-mixer="loop: repeat"
                    gltf-model="#asset3"
                    class="clickable"
                    gesture-handler
                >
                </a-entity>
            </a-marker>
            <!-- asset3 ED -->
        
            <!-- asset4 ST -->
            <a-marker
                id="id-asset4"
                type="pattern"
                preset="custom"
                url="assets/asset4.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
            >
                <a-entity
                    id="id-asset4-1"
                    scale="4.0 4.0 4.0"
                    position="0 0 0"
                    rotation="0 0 0"
                    animation-mixer="loop: repeat"
                    gltf-model="#asset4"
                    class="clickable"
                    gesture-handler
                >
                </a-entity>
            </a-marker>
            <!-- asset4 ED -->
        
            <!-- asset5 ST -->
            <a-marker
                id="id-asset5"
                type="pattern"
                preset="custom"
                url="assets/asset5.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
            >
                <a-entity
                    id="id-asset5-1"
                    scale="4.0 4.0 4.0"
                    position="0 0 0"
                    rotation="0 0 0"
                    animation-mixer="loop: repeat"
                    gltf-model="#asset5"
                    class="clickable"
                    gesture-handler
                >
                </a-entity>
            </a-marker>
            <!-- asset5 ED -->
        
            <!-- asset6 ST -->
            <a-marker
                id="id-asset6"
                type="pattern"
                preset="custom"
                url="assets/asset6.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
            >
                <a-entity
                    id="id-asset6-1"
                    scale="4.0 4.0 4.0"
                    position="0 0 0"
                    rotation="0 0 0"
                    animation-mixer="loop: repeat"
                    gltf-model="#asset6"
                    class="clickable"
                    gesture-handler
                >
                </a-entity>
            </a-marker>
            <!-- asset6 ED -->
        
            <!-- asset7 ST -->
            <a-marker
                id="id-asset7"
                type="pattern"
                preset="custom"
                url="assets/asset7.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
            >
                <a-entity
                    id="id-asset7-1"
                    scale="4.0 4.0 4.0"
                    position="0 0 0"
                    rotation="0 0 0"
                    animation-mixer="loop: repeat"
                    gltf-model="#asset7"
                    class="clickable"
                    gesture-handler
                >
                </a-entity>
            </a-marker>
            <!-- asset7 ED -->
        
            <!-- asset8 ST -->
            <a-marker
                id="id-asset8"
                type="pattern"
                preset="custom"
                url="assets/asset8.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
            >
                <a-entity
                    id="id-asset8-1"
                    scale="4.0 4.0 4.0"
                    position="0 0 0"
                    rotation="0 0 0"
                    animation-mixer="loop: repeat"
                    gltf-model="#asset8"
                    class="clickable"
                    gesture-handler
                >
                </a-entity>
            </a-marker>
            <!-- asset8 ED -->
        
            <!-- asset9 ST -->
            <a-marker
                id="id-asset9"
                type="pattern"
                preset="custom"
                url="assets/asset9.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
            >
                <a-entity
                    id="id-asset9-1"
                    scale="4.0 4.0 4.0"
                    position="0 0 0"
                    rotation="0 0 0"
                    animation-mixer="loop: repeat"
                    gltf-model="#asset9"
                    class="clickable"
                    gesture-handler
                >
                </a-entity>
            </a-marker>
            <!-- asset9 ED -->
        
            <!-- asseta ST -->
            <a-marker
                id="id-asseta"
                type="pattern"
                preset="custom"
                url="assets/asseta.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
            >
                <a-entity
                    id="id-asseta-1"
                    scale="4.0 4.0 4.0"
                    position="0 0 0"
                    rotation="0 0 0"
                    animation-mixer="loop: repeat"
                    gltf-model="#asseta"
                    class="clickable"
                    gesture-handler
                >
                </a-entity>
            </a-marker>
            <!-- asseta ED -->
        
            <!-- assetb ST -->
            <a-marker
                id="id-assetb"
                type="pattern"
                preset="custom"
                url="assets/assetb.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
            >
                <a-entity
                    id="id-assetb-1"
                    scale="4.0 4.0 4.0"
                    position="0 0 0"
                    rotation="0 0 0"
                    animation-mixer="loop: repeat"
                    gltf-model="#assetb"
                    class="clickable"
                    gesture-handler
                >
                </a-entity>
            </a-marker>
            <!-- assetb ED -->
        
            <!-- assetc ST -->
            <a-marker
                id="id-assetc"
                type="pattern"
                preset="custom"
                url="assets/assetc.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
            >
                <a-entity
                    id="id-assetc-1"
                    scale="4.0 4.0 4.0"
                    position="0 0 0"
                    rotation="0 0 0"
                    animation-mixer="loop: repeat"
                    gltf-model="#assetc"
                    class="clickable"
                    gesture-handler
                >
                </a-entity>
            </a-marker>
            <!-- assetc ED -->
        
            <!-- assetd ST -->
            <a-marker
                id="id-assetd"
                type="pattern"
                preset="custom"
                url="assets/assetd.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
            >
                <a-entity
                    id="id-assetd-1"
                    scale="4.0 4.0 4.0"
                    position="0 0 0"
                    rotation="0 0 0"
                    animation-mixer="loop: repeat"
                    gltf-model="#assetd"
                    class="clickable"
                    gesture-handler
                >
                </a-entity>
            </a-marker>
            <!-- assetd ED -->
        
            <a-entity camera></a-entity>
            <a-entity light="type: ambient; intensity: 1.1;"></a-entity>
        </a-scene>
        <div id="overlay2">
            <label id="stamp">カメラアクセスを許可してご利用ください</label>
        </div>
    
        <div id="overlay1">
            <label id="messagelabel">
                <table>
                    <tr>
                        <td><img src="./img/ojigi.jpeg" height="50px"/></td>
                        <td>起動にちょっと時間がかかることがあります</td>
                    </tr>
                </table>
            </label>
        </div>
        <script>
            const markers = document.querySelectorAll('a-marker');
            const label1 = document.querySelector('#overlay1');
            const label2 = document.querySelector('#overlay2');
    
            var msg1 = "";
            var msg2 = "";
            var prevMsg1 = "";
            var numOfMarkers = 0;
            markers.forEach(marker => {
                marker.addEventListener('markerFound', () => {
                    const markerId = marker.getAttribute('id');
                    msg1 = "";
                    msg2 = "";
                    numOfMarkers++;
                    switch(markerId) {
    
                        case 'id-asset1':
                            msg1 = '心臓\n';
                            msg2 = '(4,7,8,13)';
                            break;
            
                        case 'id-asset2':
                            msg1 = '肺\n';
                            msg2 = '(1,3,10)';
                            break;
            
                        case 'id-asset3':
                            msg1 = '胃\n';
                            msg2 = '(22)';
                            break;
            
                        case 'id-asset4':
                            msg1 = '小腸\n';
                            msg2 = '(2)';
                            break;
            
                        case 'id-asset5':
                            msg1 = '大腸\n';
                            msg2 = '(11)';
                            break;
            
                        case 'id-asset6':
                            msg1 = '肝臓\n';
                            msg2 = '(19)';
                            break;
            
                        case 'id-asset7':
                            msg1 = '膵臓\n';
                            msg2 = '(21)';
                            break;
            
                        case 'id-asset8':
                            msg1 = '腎臓\n';
                            msg2 = '(15,20)';
                            break;
            
                        case 'id-asset9':
                            msg1 = '脾臓\n';
                            msg2 = '(19)';
                            break;
            
                        case 'id-asseta':
                            msg1 = '人体\n';
                            msg2 = '(1-22)';
                            break;
            
                        case 'id-assetb':
                            msg1 = '人体(肺を除く)\n';
                            msg2 = '(1-22)1,5,10を除く';
                            break;
            
                        case 'id-assetc':
                            msg1 = '食道\n';
                            msg2 = '(12)';
                            break;
            
                        case 'id-assetd':
                            msg1 = '胆嚢\n';
                            msg2 = '(16,17)';
                            break;
            
                    default:
                        msg1 = "\n";
                        msg2 = "default";
                        break;
                    }
                    label1.textContent = prevMsg1 + " " + msg1;
                    label2.textContent = msg2; 
                    prevMsg1 = prevMsg1 + " " + msg1;
    
                });

                marker.addEventListener('markerLost', () => {
                    const markerId = marker.getAttribute('id');
                    numOfMarkers--;
                    if (numOfMarkers == 0) {
                        label1.textContent = "";
                        label2.textContent = "";
                        prevMsg1 = "";
                    }
                });
            });
        </script>
    </body>
</html>
    